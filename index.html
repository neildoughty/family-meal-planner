<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Family Meal Planner</title>
  <style>
    /* Base resets */
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: sans-serif; padding: 20px; background: #fafafa; }
    h1 { text-align: center; margin-bottom: 20px; }

    /* Admin: add meals */
    .meal-admin { display: flex; justify-content: center; margin-bottom: 20px; gap: 8px; }
    .meal-admin input { padding: 8px; border: 1px solid #ccc; border-radius: 4px; flex: 1; }
    .meal-admin button { padding: 8px 12px; border: none; border-radius: 4px; background: #0070f3; color: white; cursor: pointer; }

    /* Layout: 2-column desktop, single-column mobile */
    .layout { display: grid; grid-template-columns: 1fr 2fr; gap: 20px; }
    @media (max-width: 768px) {
      .layout { grid-template-columns: 1fr; }
    }

    /* Days grid */
    .days { display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 10px; }
    .day-card { background: #fff; border: 1px solid #ddd; border-radius: 4px; padding: 10px; display: flex; flex-direction: column; }
    .day-card h2 { font-size: 1em; margin-bottom: 8px; }
    .selected-meal { font-size: 0.9em; margin-bottom: 6px; color: #333; min-height: 1.2em; }
    .day-card select, .day-card input[type="range"] { width: 100%; margin-top: 4px; }

    /* Table styling */
    .history-table { width: 100%; border-collapse: collapse; background: #fff; border: 1px solid #ddd; border-radius: 4px; overflow: hidden; }
    .history-table th, .history-table td { border: 1px solid #ddd; padding: 8px; text-align: left; }
    .history-table th { background: #f5f5f5; font-weight: normal; }
    @media (max-width: 768px) { .history-table { margin-top: 20px; } }
  </style>
</head>
<body>
  <h1>Family Meal Planner</h1>

  <!-- Add or update your meal list here -->
  <div class="meal-admin">
    <input type="text" id="new-meal-input" placeholder="Add new meal (e.g. "Spaghetti Bolognese")" />
    <button id="add-meal-button">Add Meal</button>
  </div>

  <div class="layout">
    <!-- Left: 7-day meal cards -->
    <div class="days">
      <!-- Template for each day -->
      <div class="day-card">
        <h2>Monday</h2>
        <div class="selected-meal"></div>
        <select></select>
        <input type="range" min="0" max="100" value="50" />
      </div>
      <div class="day-card">
        <h2>Tuesday</h2><div class="selected-meal"></div><select></select><input type="range" min="0" max="100" value="50" />
      </div>
      <div class="day-card">
        <h2>Wednesday</h2><div class="selected-meal"></div><select></select><input type="range" min="0" max="100" value="50" />
      </div>
      <div class="day-card">
        <h2>Thursday</h2><div class="selected-meal"></div><select></select><input type="range" min="0" max="100" value="50" />
      </div>
      <div class="day-card">
        <h2>Friday</h2><div class="selected-meal"></div><select></select><input type="range" min="0" max="100" value="50" />
      </div>
      <div class="day-card">
        <h2>Saturday</h2><div class="selected-meal"></div><select></select><input type="range" min="0" max="100" value="50" />
      </div>
      <div class="day-card">
        <h2>Sunday</h2><div class="selected-meal"></div><select></select><input type="range" min="0" max="100" value="50" />
      </div>
    </div>

    <!-- Right: meal history table -->
    <table class="history-table">
      <thead>
        <tr><th>Meal</th><th>Days since last eaten</th><th>Meals in past 6 weeks</th></tr>
      </thead>
      <tbody>
        <!-- History rows will be static or populated later -->
        <tr><td>Spaghetti Bolognese</td><td>4</td><td>3</td></tr>
        <tr><td>Fish &amp; Chips</td><td>7</td><td>2</td></tr>
      </tbody>
    </table>
  </div>

  <script>
    // Default meal list - replace with your family's favorites
    const defaultMeals = [
      /* e.g. "Amatriciana", "Burgers", "Chilli", etc. */
    ];
    let meals = JSON.parse(localStorage.getItem('meals')) || defaultMeals.slice();
    meals.sort();

    function saveMeals() {
      localStorage.setItem('meals', JSON.stringify(meals));
    }

    function populateDropdowns() {
      document.querySelectorAll('.day-card').forEach(card => {
        const select = card.querySelector('select');
        select.innerHTML = '<option value="">— pick a meal —</option>';
        meals.forEach(meal => {
          const opt = document.createElement('option');
          opt.value = meal;
          opt.textContent = meal;
          select.appendChild(opt);
        });
      });
    }

    function updateSelectedHeading(select) {
      const card = select.closest('.day-card');
      const heading = card.querySelector('.selected-meal');
      heading.textContent = select.value || '';
    }

    function init() {
      populateDropdowns();

      // Add-meal handler
      document.getElementById('add-meal-button').addEventListener('click', () => {
        const input = document.getElementById('new-meal-input');
        const newMeal = input.value.trim();
        if (newMeal && !meals.includes(newMeal)) {
          meals.push(newMeal);
          meals.sort();
          saveMeals();
          populateDropdowns();
          input.value = '';
        }
      });

      // Dropdown change handlers
      document.querySelectorAll('.day-card select').forEach(select => {
        select.addEventListener('change', () => updateSelectedHeading(select));
        // initialize headings
        updateSelectedHeading(select);
      });
    }

    document.addEventListener('DOMContentLoaded', init);
  </script>
</body>
</html>
